<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Java语言基础 - 新手笔记</title><meta name="Description" content="免费的在线新手笔记"><meta property="og:title" content="Java语言基础" />
<meta property="og:description" content="Java语言基础 ==声明==：下文可能涉及到一些词，他们是等价的。 成员属性 == 实例属性 == 成员变量 成员方法 == 实例方法 == 普通方法 类属性 == 类变量 == 静" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xue.woyao.net/posts/java%E5%9F%BA%E7%A1%80/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" /><meta property="og:image" content="https://xue.woyao.net/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-24T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-08-24T00:00:00+00:00" /><meta property="og:site_name" content="新手笔记" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://xue.woyao.net/logo.png"/>

<meta name="twitter:title" content="Java语言基础"/>
<meta name="twitter:description" content="Java语言基础 ==声明==：下文可能涉及到一些词，他们是等价的。 成员属性 == 实例属性 == 成员变量 成员方法 == 实例方法 == 普通方法 类属性 == 类变量 == 静"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://xue.woyao.net/posts/java%E5%9F%BA%E7%A1%80/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" /><link rel="prev" href="https://xue.woyao.net/posts/database/setnx/" /><link rel="next" href="https://xue.woyao.net/posts/framework/lombok/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Java语言基础",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/xue.woyao.net\/posts\/java%E5%9F%BA%E7%A1%80\/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80\/"
        },"image": ["https:\/\/xue.woyao.net\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "语言, java","wordcount":  13573 ,
        "url": "https:\/\/xue.woyao.net\/posts\/java%E5%9F%BA%E7%A1%80\/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80\/","datePublished": "2022-08-24T00:00:00+00:00","dateModified": "2022-08-24T00:00:00+00:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https:\/\/xue.woyao.net\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "沙里"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="新手笔记"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>新手笔记</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/categories/"> 文档 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="选择语言">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/posts/java%E5%9F%BA%E7%A1%80/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" selected>简体中文</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="新手笔记"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>新手笔记</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/categories/" title="">文档</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="选择语言">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/posts/java%E5%9F%BA%E7%A1%80/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" selected>简体中文</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Java语言基础</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>沙里</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/java%E5%9F%BA%E7%A1%80/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Java基础</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2022-08-24">2022-08-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;约 13573 字&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;预计阅读 28 分钟&nbsp;<span id="/posts/java%E5%9F%BA%E7%A1%80/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" class="leancloud_visitors" data-flag-title="Java语言基础">
                        <i class="far fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#概念">概念</a>
      <ul>
        <li><a href="#原码反码补码">原码反码补码</a></li>
        <li><a href="#数据类型">数据类型</a>
          <ul>
            <li><a href="#大小">大小</a></li>
            <li><a href="#boolean-占几字节">boolean 占几字节</a></li>
            <li><a href="#数组">数组</a></li>
          </ul>
        </li>
        <li><a href="#浮点数不靠谱">浮点数不靠谱</a></li>
        <li><a href="#除零溢出">除零溢出</a></li>
        <li><a href="#显示强转型">显示强转型</a></li>
        <li><a href="#类文件">类文件</a></li>
        <li><a href="#方法签名">方法签名</a></li>
        <li><a href="#成员属性成员方法">成员属性，成员方法</a></li>
        <li><a href="#类属性类方法">类属性，类方法</a></li>
        <li><a href="#no-op">NO-OP</a></li>
        <li><a href="#继承">继承</a></li>
        <li><a href="#方法重写和重载">方法重写和重载</a></li>
        <li><a href="#可见性">可见性</a></li>
        <li><a href="#访问权限修饰符">访问权限修饰符</a></li>
      </ul>
    </li>
    <li><a href="#规则">规则</a>
      <ul>
        <li><a href="#源文件规则">源文件规则</a></li>
      </ul>
    </li>
    <li><a href="#javabean">JavaBean</a>
      <ul>
        <li><a href="#特点">特点</a></li>
        <li><a href="#作用">作用</a></li>
      </ul>
    </li>
    <li><a href="#常用类">常用类</a>
      <ul>
        <li><a href="#serializable-接口">Serializable 接口</a></li>
        <li><a href="#字符串">字符串</a>
          <ul>
            <li><a href="#编码">编码</a></li>
            <li><a href="#string">String</a></li>
            <li><a href="#stringbuilder">StringBuilder</a></li>
            <li><a href="#stringjoiner">StringJoiner</a></li>
            <li><a href="#stringbuffer">StringBuffer</a></li>
          </ul>
        </li>
        <li><a href="#数组-1">数组</a>
          <ul>
            <li><a href="#数组和arrayarraylist区别">数组<code>[]</code>和<code>Array</code>，<code>ArrayList</code>区别</a></li>
            <li><a href="#数组转list">数组<code>[]</code>转<code>List</code></a></li>
          </ul>
        </li>
        <li><a href="#map">Map</a>
          <ul>
            <li><a href="#hashmap">HashMap</a></li>
            <li><a href="#hashtable">HashTable</a></li>
          </ul>
        </li>
        <li><a href="#任意大小的数">任意大小的数</a>
          <ul>
            <li><a href="#biginteger-任意大小的整数">BigInteger-任意大小的整数</a></li>
            <li><a href="#bigdecimal-任意大小的小数">BigDecimal-任意大小的小数</a></li>
          </ul>
        </li>
        <li><a href="#math">Math</a>
          <ul>
            <li><a href="#随机数生成">随机数生成</a></li>
          </ul>
        </li>
        <li><a href="#reentrantlock">ReentrantLock</a></li>
      </ul>
    </li>
    <li><a href="#装箱">装箱</a>
      <ul>
        <li><a href="#bigdecimal">BigDecimal</a>
          <ul>
            <li><a href="#安全使用-2-种方式">安全使用 2 种方式</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#类型转换">类型转换</a>
      <ul>
        <li><a href="#字符串转其他">字符串转其他</a></li>
        <li><a href="#整型转其他">整型转其他</a></li>
      </ul>
    </li>
    <li><a href="#多态">多态</a></li>
    <li><a href="#object类">Object类</a>
      <ul>
        <li><a href="#hashcode与equals">hashCode与equals</a></li>
      </ul>
    </li>
    <li><a href="#class类">Class类</a></li>
    <li><a href="#构造方法">构造方法</a></li>
    <li><a href="#初始化顺序">初始化顺序</a></li>
    <li><a href="#静态导包">静态导包</a></li>
    <li><a href="#宏">宏</a>
      <ul>
        <li><a href="#大咖秀">大咖秀</a></li>
      </ul>
    </li>
    <li><a href="#静态方法">静态方法</a></li>
    <li><a href="#内部类">内部类</a></li>
    <li><a href="#关键字">关键字</a>
      <ul>
        <li><a href="#关键字顺序">关键字顺序</a></li>
        <li><a href="#switch">switch</a></li>
        <li><a href="#模板类class">模板类Class</a></li>
        <li><a href="#class">Class<?></a></li>
        <li><a href="#volatile">volatile</a>
          <ul>
            <li><a href="#指令重排">指令重排</a></li>
          </ul>
        </li>
        <li><a href="#静态变量线程可见为何还要添加-volatile">静态变量线程可见，为何还要添加 volatile</a></li>
        <li><a href="#extends">extends</a></li>
        <li><a href="#transient">transient</a></li>
        <li><a href="#native">native</a></li>
        <li><a href="#final">final</a></li>
        <li><a href="#static">static</a></li>
        <li><a href="#static-final">static final</a></li>
        <li><a href="#synchronized">synchronized</a>
          <ul>
            <li><a href="#同步代码块">同步代码块</a></li>
            <li><a href="#同步方法">同步方法</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#注解">注解</a>
      <ul>
        <li><a href="#元注解">元注解</a></li>
        <li><a href="#自定义注解">自定义注解</a>
          <ul>
            <li><a href="#学习元注解">学习元注解</a></li>
            <li><a href="#定义注解">定义注解</a></li>
            <li><a href="#使用注解">使用注解</a></li>
            <li><a href="#定义注解处理器">定义注解处理器</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#重写override方法">重写Override方法</a>
      <ul>
        <li><a href="#重写equals必重写hashcode方法">重写equals()必重写hashCode()方法</a></li>
      </ul>
    </li>
    <li><a href="#泛型与通配符的区别">泛型与通配符?的区别</a></li>
    <li><a href="#黑窗口">黑窗口</a></li>
    <li><a href="#线程">线程</a>
      <ul>
        <li><a href="#线程空间">线程空间</a></li>
        <li><a href="#线程内存模型">线程内存模型</a></li>
        <li><a href="#线程变量可见性">线程变量可见性</a></li>
      </ul>
    </li>
    <li><a href="#池">池</a>
      <ul>
        <li><a href="#字符串常量池">字符串常量池</a></li>
        <li><a href="#缓存池">缓存池</a></li>
      </ul>
    </li>
    <li><a href="#锁">锁</a>
      <ul>
        <li><a href="#synchronized-1">synchronized</a></li>
        <li><a href="#reentrantlock-1">ReentrantLock</a></li>
        <li><a href="#总结">总结</a></li>
      </ul>
    </li>
    <li><a href="#新特性">新特性</a>
      <ul>
        <li><a href="#18">1.8</a>
          <ul>
            <li><a href="#optional">Optional</a></li>
            <li><a href="#接口支持定义抽象方法的默认实现">接口支持定义抽象方法的默认实现</a></li>
            <li><a href="#支持函数式编程lambda">支持函数式编程，Lambda</a></li>
            <li><a href="#date-and-time-api">Date and Time API</a></li>
            <li><a href="#pipelines-and-streams">Pipelines and Streams</a></li>
            <li><a href="#type-annotations">Type Annotations</a></li>
            <li><a href="#nashhorn-javascript-engine">Nashhorn JavaScript Engine</a></li>
            <li><a href="#concurrent-accumulators">Concurrent Accumulators</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#解惑">解惑</a>
      <ul>
        <li><a href="#字符串-1">字符串</a></li>
        <li><a href="#哈希表">哈希表</a></li>
        <li><a href="#serializable-接口-1">Serializable 接口</a></li>
        <li><a href="#常量大小写问题">常量大小写问题</a></li>
      </ul>
    </li>
    <li><a href="#引用">引用</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="java语言基础">Java语言基础</h1>
<p>==声明==：下文可能涉及到一些词，他们是等价的。</p>
<ul>
<li>成员属性 == 实例属性 == 成员变量</li>
<li>成员方法 == 实例方法 == 普通方法</li>
<li>类属性 == 类变量 == 静态变量</li>
<li>类方法 == 静态方法</li>
</ul>
<h2 id="概念">概念</h2>
<h3 id="原码反码补码">原码反码补码</h3>
<table>
<thead>
<tr>
<th>数字</th>
<th>原码</th>
<th>反码</th>
<th>补码</th>
</tr>
</thead>
<tbody>
<tr>
<td>10 = 0000 1010（整数原码就是其二进制表示）</td>
<td>0000 1010</td>
<td>0000 1010</td>
<td>0000 1010</td>
</tr>
<tr>
<td>-10 = 1000 1010（负数的原码是其正数的源码，改变符号位）</td>
<td>1000 1010</td>
<td>1111 0101（原码符号位不变，其余各位按位取反）</td>
<td>1111 0110（反码加1）</td>
</tr>
</tbody>
</table>
<p>执行：-10 + 10</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="m">0000</span> <span class="m">1010</span>
</span></span><span class="line"><span class="cl"><span class="m">1111</span> <span class="nv">0110</span>
</span></span><span class="line"><span class="cl"><span class="o">=</span>
</span></span><span class="line"><span class="cl"><span class="m">1</span> <span class="m">0000</span> <span class="m">0000</span>
</span></span><span class="line"><span class="cl">由于我们使用 <span class="m">1</span> 字节存储，导致溢出的 <span class="m">1</span> 被抛弃，最终结果就是 <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="数据类型">数据类型</h3>
<p>注意：<code>java.lang.Void</code>是<code>void</code>的包装类，<code>null</code>对应的就是返回值<code>void</code>。</p>
<p>8 种基本数据类型，基本数据类型就是 CPU 可以直接运算的数据类型。其余是引用数据类型。但是 Java 的引用数据类型与 PHP 有区别，不是真引用，或者叫地址引用数据类型。</p>
<h4 id="大小">大小</h4>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>字节</th>
<th>大小</th>
<th>定义</th>
<th>默认值</th>
<th>适用</th>
</tr>
</thead>
<tbody>
<tr>
<td>byte</td>
<td>1</td>
<td>-128（-2^7）~127（2^7-1）</td>
<td>byte age = 100;</td>
<td>0</td>
<td>年龄，超过 127 岁的不多</td>
</tr>
<tr>
<td>short</td>
<td>2</td>
<td>-32768（-2^15）~32767（2^15-1）</td>
<td>short student = 1000;</td>
<td>0</td>
<td>年级的学生</td>
</tr>
<tr>
<td>int</td>
<td>4</td>
<td>-2147483648(-2^31)~2147483647(2^31-1)</td>
<td>int people = 140000000;</td>
<td>0</td>
<td>中国人口 14 亿</td>
</tr>
<tr>
<td>long</td>
<td>8</td>
<td></td>
<td>long l1 = 0L; 或者<br />long l2 = 0l;</td>
<td>0L<br />推荐 L ，小 l 容易跟 1 混淆</td>
<td></td>
</tr>
<tr>
<td>float</td>
<td>4</td>
<td></td>
<td>float f1 = 0.0f; 或者<br />float f2 = 0.0F;</td>
<td>0.0f</td>
<td></td>
</tr>
<tr>
<td>double</td>
<td>8</td>
<td></td>
<td>double d1 = 0.0d; 或者<br />double d2 = 0.0D; 或者<br />double d3 = 0.0;</td>
<td>0.0d</td>
<td></td>
</tr>
<tr>
<td>boolean</td>
<td></td>
<td>ture 或 false</td>
<td></td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>char</td>
<td>2</td>
<td>&lsquo;A&rsquo;</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>数据类型所占字节数</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">       ┌───┐
</span></span><span class="line"><span class="cl">  byte │   │
</span></span><span class="line"><span class="cl">       └───┘
</span></span><span class="line"><span class="cl">       ┌───┬───┐
</span></span><span class="line"><span class="cl"> short │   │   │
</span></span><span class="line"><span class="cl">       └───┴───┘
</span></span><span class="line"><span class="cl">       ┌───┬───┬───┬───┐
</span></span><span class="line"><span class="cl">   int │   │   │   │   │
</span></span><span class="line"><span class="cl">       └───┴───┴───┴───┘
</span></span><span class="line"><span class="cl">       ┌───┬───┬───┬───┬───┬───┬───┬───┐
</span></span><span class="line"><span class="cl">  long │   │   │   │   │   │   │   │   │
</span></span><span class="line"><span class="cl">       └───┴───┴───┴───┴───┴───┴───┴───┘
</span></span><span class="line"><span class="cl">       ┌───┬───┬───┬───┐
</span></span><span class="line"><span class="cl"> float │   │   │   │   │
</span></span><span class="line"><span class="cl">       └───┴───┴───┴───┘
</span></span><span class="line"><span class="cl">       ┌───┬───┬───┬───┬───┬───┬───┬───┐
</span></span><span class="line"><span class="cl">double │   │   │   │   │   │   │   │   │
</span></span><span class="line"><span class="cl">       └───┴───┴───┴───┴───┴───┴───┴───┘
</span></span><span class="line"><span class="cl">       ┌───┬───┐
</span></span><span class="line"><span class="cl">  char │   │   │
</span></span><span class="line"><span class="cl">       └───┴───┘
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="boolean-占几字节">boolean 占几字节</h4>
<p>Java 语言对布尔类型的存储并没有做规定，因为理论上存储布尔类型只需要 1 bit，但是通常 JVM 内部会把 boolean 表示为 4 字节整数。</p>
<p>在符合 JVM 规范的虚拟机中，如果 boolean 是单独使用，boolean 占 4 个字节，如果 boolean 是以 “boolean数组” 的形式使用，boolean 占 1 个字节。</p>
<p>原因：</p>
<blockquote>
<p>《Java虚拟机规范》一书中说 JVM 没有提供 booolean 类型专用的字节码指令，而是使用 int（4byte） 相关指令来代替。对 boolean 数组的访问与修改，会共用 byte（1byte） 数组的 baload 和 bastore 指令。</p>
</blockquote>
<ul>
<li>定义格式</li>
</ul>
<p>4 种整型：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 整型：字节（-128 ~ 127），年龄一般不会超过 127 ，本着够用的原则
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">byte</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">23</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 整型：短整型（-32768 ~ 32767），最大值 3 万 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">short</span> <span class="n">studentNum</span> <span class="o">=</span> <span class="mi">31000</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 整型：整型（-2147483648 ~ 2147483647），最大 21 亿，中国人口 14 亿
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">chineseNum</span> <span class="o">=</span> <span class="mi">1400000000</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 整型：长整型（-9223372036854775808 ~ 9223372036854775807），最大 9百万万亿，定义一个 23 亿
</span></span></span><span class="line"><span class="cl"><span class="c1">// 长整型，必须带标识 L，不推荐使用小 l ，因为跟 1 长得太像。ipv4 42 亿 9 千万
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">long</span> <span class="n">ipv4</span> <span class="o">=</span> <span class="mi">4294967296L</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">ipv4</span> <span class="o">==</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">32</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>2 种浮点型，浮点数就是小数，由于使用科学计数法表示小数时，其小数点是可以前后浮动的，所以称之为浮点数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 浮点类型单精度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">float</span> <span class="n">score1</span> <span class="o">=</span> <span class="mf">59.3f</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">score2</span> <span class="o">=</span> <span class="mf">59.3F</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 默认是双精度浮点数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">double</span> <span class="n">score3</span> <span class="o">=</span> <span class="mf">59.3</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>浮点数的最大值</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Float</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 3.4028235E38 即 3.4*10^38
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Double</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 1.7976931348623157E308 即 1.79*10^308
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>字符</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kt">char</span> <span class="n">var1</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Java 是 Unicode 编码，char 是 2 字节，所以支持中文字符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">char</span> <span class="n">var2</span> <span class="o">=</span> <span class="sc">&#39;中&#39;</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>布尔类型</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 布尔类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">boolean</span> <span class="n">res1</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">boolean</span> <span class="n">res2</span> <span class="o">=</span> <span class="o">!</span><span class="n">res1</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>未初始化的变量，不能直接使用，但是有默认值</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 年龄
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">byte</span> <span class="n">age</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">age</span><span class="o">);</span><span class="c1">// java: 可能尚未初始化变量age
</span></span></span><span class="line"><span class="cl"><span class="c1">// 月薪
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">short</span> <span class="n">salary</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">salary</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 中国人口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">chineseNum</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">chineseNum</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ipv4 最大个数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">long</span> <span class="n">ipv4</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ipv4</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">f</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">double</span> <span class="n">d</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 状态
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">boolean</span> <span class="n">isOK</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">isOK</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 字符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">char</span> <span class="n">a</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>常量</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 常量使用，只能初始化一次：先定义，后初始化
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">final</span> <span class="kt">double</span> <span class="n">PI</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">PI</span> <span class="o">=</span> <span class="mf">3.14</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 常量使用，只能初始化一次：定义的同时进行初始化
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">final</span> <span class="kt">double</span> <span class="n">PI</span> <span class="o">=</span> <span class="mf">3.14</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="数组">数组</h4>
<p>数组的 3 种定义方式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">HappyCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDrivenLearn</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 定义方式一：省略类型，常用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">char</span><span class="o">[]</span> <span class="n">var1</span> <span class="o">=</span> <span class="o">{</span><span class="sc">&#39;a&#39;</span><span class="o">,</span> <span class="sc">&#39;b&#39;</span><span class="o">,</span> <span class="sc">&#39;c&#39;</span><span class="o">};</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">var1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 定义方式二：定义时指定大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">char</span><span class="o">[]</span> <span class="n">var2</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="mi">3</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">        <span class="n">var2</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">var2</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="sc">&#39;b&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">var2</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="sc">&#39;c&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">var2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 定义方式三：边定义边初始化，数组长度由编译器推算数组大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">char</span><span class="o">[]</span> <span class="n">var3</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[]{</span><span class="sc">&#39;a&#39;</span><span class="o">,</span> <span class="sc">&#39;b&#39;</span><span class="o">,</span> <span class="sc">&#39;c&#39;</span><span class="o">};</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">var3</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="浮点数不靠谱">浮点数不靠谱</h3>
<ul>
<li>浮点数存储不靠谱，运算也不靠谱</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 十进制 0.1 的二进制是无限循环小数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 0.30000000000000004
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>浮点数的正确比较相等方式</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">HappyCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDrivenLearn</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 浮点数正确的比较方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">double</span> <span class="n">d1</span> <span class="o">=</span> <span class="mf">0.3</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">double</span> <span class="n">d2</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 错误的比较方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="n">d1</span> <span class="o">!=</span> <span class="n">d2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 正确的比较方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">d1</span> <span class="o">-</span> <span class="n">d2</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mf">0.00001</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>整数与浮点数一起运算发生类型提升</li>
</ul>
<p>整型提升为浮点型</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">HappyCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDrivenLearn</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 类型提升，5，24 分别被提升为 5.0 和 24.0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="mf">4.8</span> <span class="o">==</span> <span class="mf">24.0</span> <span class="o">/</span> <span class="mi">5</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="mf">4.8</span> <span class="o">==</span> <span class="mi">24</span> <span class="o">/</span> <span class="mf">5.0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">24</span> <span class="o">/</span> <span class="mi">5</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="除零溢出">除零溢出</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">HappyCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDrivenLearn</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// java.lang.ArithmeticException: / by zero
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">var1</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="显示强转型">显示强转型</h3>
<ul>
<li>浮点型转成整型时，会丢弃小数部分，仅保留整数部分</li>
<li>如何让浮点型转整型做到四舍五入的效果，先给浮点数+0.5，在转型</li>
<li>不同类型运算时，低精度会提升为高精度，短会转成长的参与运算</li>
<li>比较两个浮点数通常比较它们的差的绝对值是否小于一个特定值</li>
</ul>
<h3 id="类文件">类文件</h3>
<ul>
<li>1个类文件里有且仅有1个<code>public</code>类，且类名与文件名保持一致</li>
<li>1个类文件里可以有多个<code>class</code></li>
</ul>
<h3 id="方法签名">方法签名</h3>
<p>方法签名仅包含：方法名，形参（形参包括参数的个数，类型，顺序），==不包含方法返回值，和各种方法修饰符==</p>
<h3 id="成员属性成员方法">成员属性，成员方法</h3>
<p>成员属性 == 实例属性 == 成员变量</p>
<p>成员方法 == 实例方法</p>
<p>成员属性，成员方法，在类实例化时初始化，即 new 的时候初始化，分配在堆中。</p>
<h3 id="类属性类方法">类属性，类方法</h3>
<p>类属性 == 类变量 == 静态变量</p>
<p>类方法 == 静态方法</p>
<p>被<code>static</code>修饰的成员属性，叫做类属性。</p>
<p>被<code>static</code>修饰的成员方法，叫做类方法。</p>
<p>类属性和类方法在类加载的时候，初始化，分配在静态内存区，不需要做类实例化就能用。</p>
<h3 id="no-op">NO-OP</h3>
<p>我们会发现一些接口的默认方法的 docs 中会出现 NO-OP 的描述。</p>
<p>大咖秀</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">  * Notification that an attribute has been added to a session. Called after
</span></span></span><span class="line"><span class="cl"><span class="cm">  * the attribute is added.
</span></span></span><span class="line"><span class="cl"><span class="cm">  * The default implementation is a NO-OP.
</span></span></span><span class="line"><span class="cl"><span class="cm">  *
</span></span></span><span class="line"><span class="cl"><span class="cm">  * @param se Information about the added attribute
</span></span></span><span class="line"><span class="cl"><span class="cm">  */</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">default</span> <span class="kt">void</span> <span class="nf">attributeAdded</span><span class="o">(</span><span class="n">HttpSessionBindingEvent</span> <span class="n">se</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>NO-OP == No Operation，即没有任何操作，没有操作不就是一个空方法体么。</p>
<h3 id="继承">继承</h3>
<h3 id="方法重写和重载">方法重写和重载</h3>
<table>
<thead>
<tr>
<th>特点</th>
<th>方法重写</th>
<th>方法重载</th>
</tr>
</thead>
<tbody>
<tr>
<td>定制修饰符</td>
<td>@Override</td>
<td>无</td>
</tr>
<tr>
<td>可修改方法修饰符（public|final&hellip;）</td>
<td>可以<br />子类重写方法的访问权限必须比父类大。</td>
<td>可以</td>
</tr>
<tr>
<td>变更方法返回值类型</td>
<td>不可</td>
<td>可以</td>
</tr>
<tr>
<td>变更方法名称</td>
<td>不可</td>
<td>不可</td>
</tr>
<tr>
<td>变更形参</td>
<td>不可</td>
<td>可以<br />可以变更形参列表，个数，类型，顺序</td>
</tr>
</tbody>
</table>
<p>==方法签名==不同即是方法重载，方法签名和方法返回值都相同，是重写。方法签名相同但方法返回值不同，编译器会报错。</p>
<p>加==@Override==注解，可以让编译器帮助检查是否进行了正确的重写。如果不小心写错了方法签名，编译器会报错。</p>
<p>PHP 子类继承父类的有参构造方法，而 Java 只能继承父类的无参构造。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"></code></pre></td></tr></table>
</div>
</div><h3 id="可见性">可见性</h3>
<p>如下操作，会打开变量可见性。</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>原因</th>
</tr>
</thead>
<tbody>
<tr>
<td>使用 ==volatile==修饰变量</td>
<td></td>
</tr>
<tr>
<td>执行 ==synchronized== 修饰的代码</td>
<td>执行同步代码前，会重新加载</td>
</tr>
<tr>
<td>执行 ==Thread.sleep()== 方法让出 CPU</td>
<td>让出 CPU 时，会重新加载变量</td>
</tr>
<tr>
<td>执行 ==System.out.println()== 方法</td>
<td>println 是同步方法，因为要做打印字符和打印换行符 2 个操作<br />由于需要保证这 2 个操作同时执行，不发生线程切换，必须同步执行。</td>
</tr>
</tbody>
</table>
<h3 id="访问权限修饰符">访问权限修饰符</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/024f78f0f736afc3d7954271b119ebc4b745120c.jpg"
        data-srcset="/images/024f78f0f736afc3d7954271b119ebc4b745120c.jpg, /images/024f78f0f736afc3d7954271b119ebc4b745120c.jpg 1.5x, /images/024f78f0f736afc3d7954271b119ebc4b745120c.jpg 2x"
        data-sizes="auto"
        alt="/images/024f78f0f736afc3d7954271b119ebc4b745120c.jpg"
        title="img" /></p>
<h2 id="规则">规则</h2>
<h3 id="源文件规则">源文件规则</h3>
<ul>
<li>1 个源文件可以有多个非 public 类，但是只能有 1 个 public 类</li>
<li>源文件的名称要与 public 类的类名保持一致，包括大小写，因为 Java 大小写敏感</li>
</ul>
<h2 id="javabean">JavaBean</h2>
<h3 id="特点">特点</h3>
<p>Java Bean 的特点，就是如果一个类满足如下特性，就可以说他是一个 Java Bean 了。</p>
<ul>
<li>属性全私有，属性的访问和操作靠 setXXX/getXXX 方法</li>
<li>显式声明无参构造方法</li>
<li>类访问属性必须是 public class</li>
<li>实现 Serializable 接口，支持序列化</li>
</ul>
<h3 id="作用">作用</h3>
<blockquote>
<p>JavaBean 主要用来传递数据，即把一组数据组合成一个 JavaBean 便于传输。此外，JavaBean 可以方便地被 IDE 工具分析，生成读写属性的代码，主要用在图形界面的可视化设计中。</p>
<p>JavaBean 是一种符合命名规范的<code>class</code>，它通过<code>getter</code>和<code>setter</code>来定义属性。</p>
<p>使用<code>Introspector.getBeanInfo()</code>可以获取属性列表。</p>
</blockquote>
<p>JavaBean 细分为：DTO，VO</p>
<table>
<thead>
<tr>
<th>Bean</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>DAO（Data Access Object）数据访问对象</td>
<td></td>
</tr>
<tr>
<td>VO（View Object）视图对象</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="常用类">常用类</h2>
<h3 id="serializable-接口">Serializable 接口</h3>
<h3 id="字符串">字符串</h3>
<h4 id="编码">编码</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">HappyCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDrivenLearn</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span> <span class="n">zh</span> <span class="o">=</span> <span class="sc">&#39;\u4e2d&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="sc">&#39;中&#39;</span> <span class="o">==</span> <span class="n">zh</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">zh</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="string">String</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">HappyCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDrivenLearn</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&#34;hello world!&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 求字符串长度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="mi">12</span> <span class="o">==</span> <span class="n">str</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 比较字符串是否相等
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="n">str</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;hello world!&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 获取二个字符，字符是基本数据类型，可以直接使用 == 比较
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="sc">&#39;e&#39;</span> <span class="o">==</span> <span class="n">str</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 字符串转大写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="n">str</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">(</span><span class="n">Locale</span><span class="o">.</span><span class="na">ROOT</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;HELLO WORLD!&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 判断字符串中是否包含字符 d
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="n">str</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">&#34;d&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 判断字符串是否以某个字串结尾
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="n">str</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">&#34;d!&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="n">str</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&#34;he&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="n">str</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&#34;ll&#34;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 截取字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="n">str</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;hel&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">str</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;llo world!&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 查找字串的位置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="mi">2</span> <span class="o">==</span> <span class="n">str</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&#34;l&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="mi">9</span> <span class="o">==</span> <span class="n">str</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">&#34;l&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="mi">6</span> <span class="o">==</span> <span class="n">str</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&#34;wo&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 空白判断
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="s">&#34;&#34;</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="kc">false</span> <span class="o">==</span> <span class="s">&#34; &#34;</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 替换
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">assert</span> <span class="n">str</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="sc">&#39;l&#39;</span><span class="o">,</span> <span class="sc">&#39;L&#39;</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;heLLo worLd!&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 字符数组，字符串互转
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">char</span><span class="o">[]</span> <span class="n">cs</span> <span class="o">=</span> <span class="s">&#34;hello&#34;</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">cs</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="sc">&#39;w&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">cs</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="n">str1</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;hwllo&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">cs</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="sc">&#39;w&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">cs</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;wwllo&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="n">str1</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;hwllo&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="stringbuilder">StringBuilder</h4>
<h4 id="stringjoiner">StringJoiner</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">HappyCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDrivenLearn</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 字符串拼接
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="o">{</span><span class="s">&#34;tony&#34;</span><span class="o">,</span> <span class="s">&#34;maria&#34;</span><span class="o">,};</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="s">&#34;tony,maria&#34;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">,</span> <span class="n">names</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">StringJoiner</span> <span class="n">stringJoiner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringJoiner</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">,</span> <span class="s">&#34;hello &#34;</span><span class="o">,</span> <span class="s">&#34;!&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">names</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">stringJoiner</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="s">&#34;hello tony,maria!&#34;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">stringJoiner</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>总结：拼接需要使用前后缀的，使用<code>StringJoiner</code>，只需要简单的拼接使用<code>java.lang.String#join(java.lang.CharSequence, java.lang.CharSequence...)</code>。</p>
<h4 id="stringbuffer">StringBuffer</h4>
<p><code>StringBuilder</code>的线程安全版，原因使用<code>synchronized</code>修饰了方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">StringBuffer</span> <span class="nf">append</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">StringBuffer</span> <span class="nf">append</span><span class="o">(</span><span class="n">StringBuffer</span> <span class="n">sb</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">String</span> <span class="nf">substring</span><span class="o">(</span><span class="kt">int</span> <span class="n">start</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="数组-1">数组</h3>
<h4 id="数组和arrayarraylist区别">数组<code>[]</code>和<code>Array</code>，<code>ArrayList</code>区别</h4>
<ul>
<li><code>[]</code>是定义数组简写</li>
<li><code>Array</code>这个类不存在，即不存在<code>java.lang.Array</code></li>
<li><code>ArrayList</code>是集合，是<code>List</code>的子类，类似数组</li>
</ul>
<h4 id="数组转list">数组<code>[]</code>转<code>List</code></h4>
<h3 id="map">Map</h3>
<h4 id="hashmap">HashMap</h4>
<h4 id="hashtable">HashTable</h4>
<p>HashTable 相较于 HashMap 线程安全。</p>
<h3 id="任意大小的数">任意大小的数</h3>
<h4 id="biginteger-任意大小的整数">BigInteger-任意大小的整数</h4>
<h4 id="bigdecimal-任意大小的小数">BigDecimal-任意大小的小数</h4>
<p><code>BigDecimal</code>可以表示一个任意大小且精度完全准确的浮点数。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>==</td>
<td>比较两个对象的地址，即是否为同一个对象</td>
</tr>
<tr>
<td>java.math.BigDecimal#compareTo<br />相等返回 0，大于返回 1，小于返回 -1</td>
<td>仅比较两个数的大小，不比较精度<code>scale</code><br />比较两个数是否相等，==推荐使用compareTo()方法==</td>
</tr>
<tr>
<td>java.math.BigDecimal#equals</td>
<td>不仅比较两个数的大小，还比较精度</td>
</tr>
</tbody>
</table>
<p>打开<code>BigDecimal</code>源码，发现其包含一个大整数和小数的位置。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/image-20220905210834841.png"
        data-srcset="/images/image-20220905210834841.png, /images/image-20220905210834841.png 1.5x, /images/image-20220905210834841.png 2x"
        data-sizes="auto"
        alt="/images/image-20220905210834841.png"
        title="image-20220905210834841" /></p>
<h3 id="math">Math</h3>
<h4 id="随机数生成">随机数生成</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 生成随机数[min, max)：随机比例 * (max - min) + min，生成1，100的随机数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">double</span> <span class="n">random1</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">random</span><span class="o">()</span> <span class="o">*</span> <span class="o">(</span><span class="mi">101</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">random2</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">random1</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Math.random()</code>返回值介于<code>[0, 1)</code>之间，类似一个比例。</p>
<h3 id="reentrantlock">ReentrantLock</h3>
<h2 id="装箱">装箱</h2>
<ul>
<li>所有的包装类型都是不变的，因为其底层都是基本类型常量<code>private final float value;</code></li>
<li>自动装箱，自动拆箱在编译期完成</li>
<li>包装类型比较必须使用<code>equals()</code>方法</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">HappyCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDrivenLearn</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 隐式装箱
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Integer</span> <span class="n">age1</span> <span class="o">=</span> <span class="mi">23</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 显式装箱，常用隐式装箱
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Integer</span> <span class="n">age2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="mi">23</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Integer</span> <span class="n">age3</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">23</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 显式拆箱
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">age4</span> <span class="o">=</span> <span class="n">age1</span><span class="o">.</span><span class="na">intValue</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 隐式拆箱，常用隐式拆箱
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">age5</span> <span class="o">=</span> <span class="n">age2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="bigdecimal">BigDecimal</h3>
<h4 id="安全使用-2-种方式">安全使用 2 种方式</h4>
<p>todo</p>
<h2 id="类型转换">类型转换</h2>
<h3 id="字符串转其他">字符串转其他</h3>
<table>
<thead>
<tr>
<th>操作</th>
<th>code</th>
</tr>
</thead>
<tbody>
<tr>
<td>转字节类型</td>
<td>String s = new String(&ldquo;hello 广州&rdquo;);<br />byte[] sBytes = s.getBytes(StandardCharsets.UTF_8);</td>
</tr>
<tr>
<td>基本数据类型转字符串</td>
<td>String.valueOf() 重载了支持多种基本数据类型<br /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/image-20220915190539050.png"
        data-srcset="/images/image-20220915190539050.png, /images/image-20220915190539050.png 1.5x, /images/image-20220915190539050.png 2x"
        data-sizes="auto"
        alt="/images/image-20220915190539050.png"
        title="image-20220915190539050" /></td>
</tr>
</tbody>
</table>
<h3 id="整型转其他">整型转其他</h3>
<h2 id="多态">多态</h2>
<blockquote>
<p>多态是指，针对某个类型的方法调用，其真正执行的方法取决于运行时期实际类型的方法。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Tony</span> <span class="kd">implements</span> <span class="n">Student</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">say</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;I am tony&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Maria</span> <span class="kd">implements</span> <span class="n">Student</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">say</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;I am maria&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">People</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">introduce</span><span class="o">(</span><span class="n">Student</span> <span class="n">student</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">student</span><span class="o">.</span><span class="na">say</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">HappyCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDrivenLearn</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">People</span><span class="o">.</span><span class="na">introduce</span><span class="o">(</span><span class="k">new</span> <span class="n">Tony</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// I am tony
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">People</span><span class="o">.</span><span class="na">introduce</span><span class="o">(</span><span class="k">new</span> <span class="n">Maria</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// I am maria
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="object类">Object类</h2>
<p>Object 是 Java 中的万类之父，类似 PHP 中的 <code>stdClass</code>。</p>
<h3 id="hashcode与equals">hashCode与equals</h3>
<p>集合需要检查元素是否存在，hashCode 获得元素地址，比遍历元素比较 equals 来的快。</p>
<p>A.equals(B) == true 即两个值相同，其 hashCode 一定相同。但是反过来，hashCode 相同的，其值不一定相同。</p>
<ul>
<li>equals 相同，hashCode 必须相同，要求重写 equals 的同时==必须重写 hashCode()==</li>
<li>hashCode 相同，equals 不一定相同。说明存在==哈希冲突==，相同 hashCode 但是 equals 不同的元素，我们在同一个哈希地址上，用链表存储，检查 HashMap 上是否存在某个值时，首先计算对象的 Hash 值，找到哈希地址，O(1)，发现此哈希地址上挂载了链表，此位置存在哈希冲突，然后遍历链表逐个元素比较，O(n)。</li>
</ul>
<p>例如：</p>
<p>9 个哈希值相同的英文字符串：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">arrayList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl"><span class="n">arrayList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;3Qj&#34;</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="n">arrayList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;2pj&#34;</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="n">arrayList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;2qK&#34;</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="n">arrayList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;2r,&#34;</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="n">arrayList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;3RK&#34;</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="n">arrayList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;3S,&#34;</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="n">arrayList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;42j&#34;</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="n">arrayList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;43K&#34;</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="n">arrayList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;44,&#34;</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">arrayList</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// [51628, 51628, 51628, 51628, 51628, 51628, 51628, 51628, 51628]
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>2 个哈希值相同的中文词：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"></code></pre></td></tr></table>
</div>
</div><ul>
<li>equals() 方法的 4 大原则，指导我们实现 equals 方法必须遵循这个原则</li>
</ul>
<table>
<thead>
<tr>
<th>特性</th>
<th>equals 方法必须遵循以下原则</th>
</tr>
</thead>
<tbody>
<tr>
<td>自反性</td>
<td>A.equals(A) == true</td>
</tr>
<tr>
<td>一致性</td>
<td>没有修改 A 和 B 的情况下，永久 true == A.equals(B)<br />像不像幂等</td>
</tr>
<tr>
<td>传递性</td>
<td>如果 true == A.quals(B)，true == B.equals(C)，存在 A.equals(C)</td>
</tr>
<tr>
<td>对称性</td>
<td>如果 true == A.equals(B)，存在 true == B.equals(A)</td>
</tr>
</tbody>
</table>
<h2 id="class类">Class类</h2>
<p>Class是一个用来表示类的类，它内部可以记录类的成员、接口等信息。</p>
<p>Class 类也是 Object 的子类。</p>
<p>获取类的 Class 实例的 3 种方法</p>
<ol>
<li>通过当前类对象的 getClass() 方法获取 Class 的实例</li>
<li>通过 Class.forName(当前类的完整限定名) 获取当前类的 Class 实例</li>
<li>当前类<code>类名.class</code>获取 Class 实例</li>
</ol>
<p>A.class 即 A 类的表达类 Class 的实例。在 JVM 种，每个类的 Class 类有且仅有一个实例。
或者说 A.class 是  new A() 实例的模板。</p>
<h2 id="构造方法">构造方法</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Parent</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 下面是编译器编译生成的字节码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">class</span> <span class="nc">Parent</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Parent</span><span class="o">()</span> <span class="o">{</span> <span class="cm">/* compiled code */</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>javac 编译器一定会为无构造方法的类，创建无参构造方法，并在所有构造方法的第一行隐式调用其父类的无参构造；定义了构造方法的类，编译器不再为其创建无参构造方法</li>
<li>子类所有构造方法的第一行，必须是调用父类的构造方法，父类的无参构造可以隐式调用不写，有参构造必须显示调用写出来</li>
<li>子类不可能重写父类的构造方法，即使子类中定义了一个与父类同名的方法，那也不叫重写，只是一个新方法</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Parent</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Parent</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;父类的无参构造&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Son1</span> <span class="kd">extends</span> <span class="n">Parent</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">Parent</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;子类的普通方法&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Son1</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;子类的无参构造&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">new</span> <span class="n">Parent</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 父类的无参构造
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">new</span> <span class="n">Son1</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 父类的无参构造 子类的无参构造
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="初始化顺序">初始化顺序</h2>
<p>静态变量和静态代码块，在类加载时初始化，==至于静态变量和静态代码块初始化的顺序，取决于他们定义的顺序==。</p>
<p>实例变量和实例方法在类加载后，new 的时候初始化。</p>
<h2 id="静态导包">静态导包</h2>
<p>即一次性导入某个类的所有静态方法和静态属性，在本类中使用导入类的公有，私有属性和方法，不用加类名，就像使用本类的属性和方法一样容易。</p>
<p>有点类似 PHP 里的 <code>use triat</code>，在本类中，复制了一份导入类的代码。</p>
<h2 id="宏">宏</h2>
<p>其实 C 语言的宏定义在 Java 中是真实存在的。由于低版本的 PHP 还不支持类属性被赋值表达式，进而无法完成宏定义。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Chinese</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Chinese</span> <span class="n">HELLO</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Chinese</span><span class="o">().</span><span class="na">hello</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Chinese</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 宏定义任务
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;hello world&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 执行宏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Chinese</span> <span class="n">hello</span> <span class="o">=</span> <span class="n">Chinese</span><span class="o">.</span><span class="na">HELLO</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="大咖秀">大咖秀</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Boolean</span> <span class="kd">implements</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                      <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * The {@code Boolean} object corresponding to the primitive
</span></span></span><span class="line"><span class="cl"><span class="cm">     * value {@code true}.
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Boolean</span> <span class="n">TRUE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Boolean</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * The {@code Boolean} object corresponding to the primitive
</span></span></span><span class="line"><span class="cl"><span class="cm">     * value {@code false}.
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Boolean</span> <span class="n">FALSE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Boolean</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 利用宏定义 new 一个对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Boolean</span> <span class="n">abc</span> <span class="o">=</span> <span class="n">Boolean</span><span class="o">.</span><span class="na">TRUE</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="静态方法">静态方法</h2>
<ul>
<li>静态方法不能是抽象的，因为他要在类加载的时候执行方法体</li>
</ul>
<h2 id="内部类">内部类</h2>
<p>内部静态类有静态方法，非静态方法</p>
<p>内部非静态类只有非静态方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">OutClass</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">say</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是普通内部类普通方法&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// java 8 不支持普通内部类中定义静态方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// public static void staticSay() {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//     System.out.println(&#34;我是普通内部类的静态方法&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// }
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">static</span> <span class="kd">class</span> <span class="nc">StaticInnerClass</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">say</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是静态内部类的普通方法&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">staticSay</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是静态内部类的静态方法&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">say</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是外部类的普通方法&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 调用内部静态类的，静态方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">OutClass</span><span class="o">.</span><span class="na">StaticInnerClass</span><span class="o">.</span><span class="na">staticSay</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">OutClass</span> <span class="n">outClass</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OutClass</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 调用内部非静态类的，非静态方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">OutClass</span><span class="o">.</span><span class="na">InnerClass</span> <span class="n">innerClass</span> <span class="o">=</span> <span class="n">outClass</span><span class="o">.</span><span class="na">new</span> <span class="nf">InnerClass</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">innerClass</span><span class="o">.</span><span class="na">say</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 那么如何调用内部静态类的，非静态方法呢
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="关键字">关键字</h2>
<h3 id="关键字顺序">关键字顺序</h3>
<blockquote>
<p>在Java中，通常将关键字和修饰符按照以下的顺序进行排列：</p>
<ol>
<li>
<p>访问修饰符（Access Modifiers）：public、protected、private</p>
</li>
<li>
<p>非访问修饰符（Non-Access Modifiers）：static、final、abstract、synchronized等</p>
</li>
<li>
<p>其他关键字：class、interface、enum等</p>
</li>
</ol>
<p>具体来说，修饰符的顺序可以是这样的：</p>
<p>访问修饰符  非访问修饰符  其他关键字  类型  变量名</p>
</blockquote>
<h3 id="switch">switch</h3>
<p>switch(变量) 不支持 Long/long 类型。</p>
<h3 id="模板类class">模板类Class</h3>
<p>Class 类的实例是每个类的实例的模板，且 JVM 中有且仅有一份。</p>
<p>代码展示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Student</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 由于一个类有且仅有一个对象模板，所以下面三个 Class 对象是相同的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Student</span> <span class="n">student1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">Student</span> <span class="n">student2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">student1</span> <span class="o">!=</span> <span class="n">student2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 获取类的模板实例方式一 == 获取类的模板实例方式二
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">assert</span> <span class="n">Student</span><span class="o">.</span><span class="na">class</span> <span class="o">==</span> <span class="n">student1</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">Student</span><span class="o">.</span><span class="na">class</span> <span class="o">==</span> <span class="n">student2</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">student1</span><span class="o">.</span><span class="na">getClass</span><span class="o">()</span> <span class="o">==</span> <span class="n">student2</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Object 是万类之父?
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">assert</span> <span class="n">Student</span><span class="o">.</span><span class="na">class</span> <span class="k">instanceof</span> <span class="n">Class</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">Student</span><span class="o">.</span><span class="na">class</span> <span class="k">instanceof</span> <span class="n">Object</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">Object</span><span class="o">.</span><span class="na">class</span> <span class="k">instanceof</span> <span class="n">Class</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">Class</span><span class="o">.</span><span class="na">class</span> <span class="k">instanceof</span> <span class="n">Object</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 不可比较的类型: java.lang.Class&lt;java.lang.Class&gt;和java.lang.Class&lt;java.lang.Object&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Class</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// class java.lang.Class
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Object</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// class java.lang.Object
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">assert</span> <span class="n">Class</span><span class="o">.</span><span class="na">class</span> <span class="k">instanceof</span> <span class="n">Class</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">Class</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClass</span><span class="o">()</span> <span class="k">instanceof</span> <span class="n">Class</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">Class</span><span class="o">.</span><span class="na">class</span> <span class="o">==</span> <span class="n">Class</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 问 Object 跟 Class 的关系?
</span></span></span><span class="line"><span class="cl"><span class="c1">// 必须捕获异常
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 获取类的模板实例：方式三
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">assert</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&#34;shali.bbs.temp.Student&#34;</span><span class="o">)</span> <span class="k">instanceof</span> <span class="n">Class</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="class">Class<?></h3>
<p>==不要觉得 Class 类多么高端莫测，其实他就相当于 PHP 中的<code>ReflectionClass</code>类，对反射类。不知道 Java 为何不叫反射类。==</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">native</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">getClass</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>说<code>?</code>表示未知的类型，既然是未知的类型，为何不像泛型那样，使用<code>Class&lt;T&gt;</code>呢？</p>
<p>Class 类的实例是单例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.junit.Assert</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClassTest</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">singleton</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">A</span> <span class="n">a1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">A</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">A</span> <span class="n">a2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">A</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Assert</span><span class="o">.</span><span class="na">assertNotSame</span><span class="o">(</span><span class="n">a1</span><span class="o">,</span> <span class="n">a2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">A</span><span class="o">&gt;</span> <span class="n">a1Class</span> <span class="o">=</span> <span class="n">a1</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">A</span><span class="o">&gt;</span> <span class="n">a2Class</span> <span class="o">=</span> <span class="n">a2</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Class</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">a3Class</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">Assert</span><span class="o">.</span><span class="na">assertSame</span><span class="o">(</span><span class="n">a1Class</span><span class="o">,</span> <span class="n">a2Class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Assert</span><span class="o">.</span><span class="na">assertSame</span><span class="o">(</span><span class="n">a1Class</span><span class="o">,</span> <span class="n">a3Class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="volatile">volatile</h3>
<p>作用：==打开线程间变量的可访问性==，==禁止指令重排序==。</p>
<p>英文的意思是很容易变的，需要你常去更新。</p>
<p>大咖秀</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Thread</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">volatile</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>volatile 修饰的变量，线程间可访问。线程的名字用 volatile 修饰，就是为了让不同的线程，可以获取彼此的名称。</p>
<p>volatile 修饰的线程共享变量，存放在主内存区。</p>
<p>JMM（Java　Memory Model），Java 内存模型规定：</p>
<p>所有的共享变量都存储于主内存。这里所说的变量指的是实例变量和类变量，不包含局部变量，因为局部变量是线程私有的，因此不存在竞争问题。
各个线程自己的变量存放在本地内存。</p>
<p>思考开放线程中的变量的可访问性，还有什么方法？</p>
<ul>
<li>volatile 同 synchronized 对比</li>
</ul>
<h4 id="指令重排">指令重排</h4>
<p>注意下面的代码不是重排序，而是 JVM 的优化。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 源码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">boolean</span> <span class="n">isStop</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="o">(!</span><span class="n">isStop</span><span class="o">)</span> <span class="o">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// JVM 指令重排
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="静态变量线程可见为何还要添加-volatile">静态变量线程可见，为何还要添加 volatile</h3>
<blockquote>
<p>在Java中，静态变量（static variable）是被所有实例对象共享的，因此可以被多个线程同时访问和修改。然而，由于线程之间的可见性问题和指令重排序优化，有时候静态变量的修改可能对其他线程不可见，导致出现线程安全问题。</p>
<p>volatile关键字可以解决可见性问题。当一个静态变量被volatile修饰时，对该变量的写操作会立即刷新到主内存，而对该变量的读操作会从主内存中读取最新的值。这样可以确保不同线程之间对该变量的操作是可见的，避免了出现脏读、可见性问题等。</p>
<p>虽然静态变量本身具有线程可见性，但是在某些情况下，使用volatile关键字可以增强线程之间的可见性，确保变量的修改对其他线程是可见的。例如，在双重检查锁定（Double-Checked Locking）中，为了保证单例对象的正确性和线程安全性，通常将静态变量使用volatile修饰。</p>
<p>需要注意的是，volatile关键字只能保证可见性，并不能保证原子性。如果需要保证原子性操作，可以考虑使用synchronized关键字或者使用原子类（Atomic Class）来替代volatile。</p>
<p>总之，使用volatile关键字修饰静态变量可以确保对该变量的修改对其他线程是可见的，避免了线程安全问题。</p>
</blockquote>
<h3 id="extends">extends</h3>
<ul>
<li>
<p>接口 extends 接口</p>
</li>
<li>
<p>抽象类 extends 接口</p>
</li>
<li>
<p>抽象类 extends 抽象类</p>
</li>
<li>
<p>具体类 extends 接口</p>
</li>
<li>
<p>具体类 extends 抽象类</p>
</li>
</ul>
<p>不像其他语言，对泛化和实现关系使用不同的关键字进行区分，比如 PHP，<code>extends</code>表泛化，<code>implements</code>表实现。</p>
<h3 id="transient">transient</h3>
<p>adj. 短暂的，临时的</p>
<p>我们知道，如果想序列化一个对象，只要其实现了<code>java.io.Serializable</code>接口，其属性和方法就能被自动地序列化。但是有些属性比较敏感，比如用户的密码属性，我们只想其运行时出现在内存中，不想被序列化传输和保存怎么办，那我们就需要给这个属性进行标记。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">private</span> <span class="kd">transient</span> <span class="n">String</span> <span class="n">password</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>transient 只能修饰成员属性，不能修饰类属性，因为类属性，修饰与否，都不会被序列化</li>
<li>transient 一旦修饰了某个成员变量，这个实例被反序列化后，其成员变量是 null</li>
</ul>
<h3 id="native">native</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">native</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>被<code>native</code>修饰的方法，说明这个方法不是 Java 语言实现，而是其他语言编译生成动态链接库<code>dll</code>给 Java 调用。</p>
<h3 id="final">final</h3>
<table>
<thead>
<tr>
<th>被修饰者</th>
<th>特性</th>
</tr>
</thead>
<tbody>
<tr>
<td>局部变量</td>
<td>被 final 修饰的局部变量是局部常量，只能赋值一次，不可改变<br />==final 修饰局部常量，使用之前必须赋值==</td>
</tr>
<tr>
<td>成员属性</td>
<td>被 final 修饰的成员属性叫实例常量<br />==final 修饰的成员变量声明时未赋值的，必须在构造方法/静态代码块中初始化，即保证创建对象的时候初始化。==</td>
</tr>
<tr>
<td>类属性</td>
<td>类常量</td>
</tr>
<tr>
<td>成员方法</td>
<td>不能被重写 Override，==可以被继承和重载 Overload==</td>
</tr>
<tr>
<td>类</td>
<td>不能被继承，final 让类变成太监类</td>
</tr>
</tbody>
</table>
<ul>
<li>final 修饰的引用类型，不能改变指向对象，但是可以改变对象的内的内容。</li>
<li>final 修饰成员属性</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">People</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 一：定义的时候初始化
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">nationality</span> <span class="o">=</span> <span class="s">&#34;汉&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 二：静态代码块里初始化
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">country</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 三：构造方法里初始化
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">static</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">country</span> <span class="o">=</span> <span class="s">&#34;中国&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">People</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="static">static</h3>
<table>
<thead>
<tr>
<th>被修饰者</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>代码块{}</td>
<td>被 static 修饰的代码块，在类文件加载时，就执行。</td>
</tr>
<tr>
<td>类属性</td>
<td>被 static 修饰的成员属性就会变成类属性，因为所有对象共享此变量</td>
</tr>
<tr>
<td>类方法</td>
<td>被 static 修饰的成员方法为类方法，类方法，可以不需要实例化，直接使用类名调用。<br />类方法中不能调用成员方法，但是成员方法中可以调用类方法。</td>
</tr>
</tbody>
</table>
<h3 id="static-final">static final</h3>
<ul>
<li>被修饰的属性，属于类属性，只能被赋值一次</li>
<li>被修饰的方法，属于类方法，含有 final 的特性，不能被重写。</li>
</ul>
<h3 id="synchronized">synchronized</h3>
<p><code>synchronized</code>翻译成同步，很容易产生误解。</p>
<p>因为汉语中的同步是同时进行，同时发生。而<code>synchronized</code>刚好相反，不能同时进行，要按照顺序进行。</p>
<p>那线程同步是不是要让两个线程同时执行呢？</p>
<p>不是的，这里的<code>synchronized</code>同步就不是那个意思了，而是我前面做，你后面做，我们不能同时做。即方法 A 不执行完，方法 B 不能执行。</p>
<p><code>异步</code>就不一样了，方法 B 不需要等方法 A 执行完，就可以去执行，这是异步。</p>
<table>
<thead>
<tr>
<th>被修饰者</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>抽象方法</td>
<td>synchronized 不能修饰抽象类或接口中的抽象方法</td>
</tr>
<tr>
<td>构造方法</td>
<td>synchronized 不能修饰构造方法</td>
</tr>
<tr>
<td>普通方法</td>
<td>synchronized 修饰的构造方法，子类重写时，如果需要同步，需要继续添加 synchronized 关键字</td>
</tr>
</tbody>
</table>
<h4 id="同步代码块">同步代码块</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"></code></pre></td></tr></table>
</div>
</div><h4 id="同步方法">同步方法</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"></code></pre></td></tr></table>
</div>
</div><p>同步代码块和同步方法，其实都说明了其持有的锁。只不过同步方法隐式地持有 this 对象。</p>
<p>注意，当同步代码（同步代码块和同步方法）使用相同的锁时，彼此不会等对方是否锁，即可进入同步代码。</p>
<blockquote>
<p>由于 synchronized 是在 JVM 层面实现的，因此系统可以监控锁的释放与否；
而 ReentrantLock 是使用代码实现的，系统无法自动释放锁，需要在代码中的 finally 子句中显式释放锁 lock.unlock()。</p>
<p>另外，在并发量比较小的情况下，使用 synchronized 是个不错的选择；
但是在并发量比较高的情况下，其性能下降会很严重，此时 ReentrantLock 是个不错的方案。</p>
</blockquote>
<h2 id="注解">注解</h2>
<p>Java1.5 开始引入注解。</p>
<table>
<thead>
<tr>
<th>注解</th>
<th>类型</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>@Override</td>
<td>语言内置注解</td>
<td>注解方法，说这是一个被子类重写的方法</td>
</tr>
<tr>
<td>@Target</td>
<td>元注解</td>
<td>注解注解，说这个注解可以用来注解类还是类方法<br />ElementType.METHOD 表示可以用来注解类方法<br />ElementType.TYPE 表示可以用来注解类</td>
</tr>
<tr>
<td>@Retention</td>
<td>元注解</td>
<td>注解注解，用于提示注解被保留多长时间。<br />例如 RetentionPolicy.RUNTIME 表示注解在运行期间一直保留</td>
</tr>
<tr>
<td>@Documented</td>
<td>元注解</td>
<td>表示注解是否能被 javadoc 处理并保留在文档中</td>
</tr>
</tbody>
</table>
<h3 id="元注解">元注解</h3>
<p>元注解就是能够定义注解的注解。我们可以使用元注解，来定制我们自己需要的注解。</p>
<h3 id="自定义注解">自定义注解</h3>
<p>下面我们要实现自己的注解。</p>
<h4 id="学习元注解">学习元注解</h4>
<p>可以修饰注解的注解，我们称之为元注解。</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>@interface</td>
<td>==不是元注解==，注解类型声明关键字，类似<code>class</code>，<code>interface</code>等声明关键字</td>
</tr>
<tr>
<td>@Inherited</td>
<td>子类是否能从被父类继承此注解</td>
</tr>
<tr>
<td>@Target</td>
<td>参数是<code>ElementType[]</code>，指定被注解修饰的类型</td>
</tr>
<tr>
<td>@Documented</td>
<td>此注解是否允许被 Javadoc 工具解析成文档</td>
</tr>
<tr>
<td>@Retention</td>
<td>指明注解的声明周期，存于源码中，字节码中，还是 JVM 运行时。</td>
</tr>
</tbody>
</table>
<h4 id="定义注解">定义注解</h4>
<p>我们希望定义一种注解，当其注解方法时，就输出一句话。输出的话可以指定内容。</p>
<p>定义注解也可以理解为定义标签。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.lang.annotation.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 注解允许被 Javadoc 工具提取为文档
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Documented</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 注解允许被继承
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Inherited</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 仅注解方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Target</span><span class="o">({</span><span class="n">ElementType</span><span class="o">.</span><span class="na">METHOD</span><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 声明周期到运行时
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Retention</span><span class="o">(</span><span class="n">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="nd">@interface</span> <span class="n">MyAnnotation</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 可以理解为注解的属性，写成方法的形式是为了后面好调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">String</span> <span class="nf">say</span><span class="o">()</span> <span class="k">default</span> <span class="s">&#34;&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="使用注解">使用注解</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnnotationTest</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@MyAnnotation</span><span class="o">(</span><span class="n">say</span> <span class="o">=</span> <span class="s">&#34;我的注解解析器被执行了&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">annotationProcessor</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Method</span> <span class="n">method</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 反射当前方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">method</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getMethod</span><span class="o">(</span><span class="s">&#34;annotationProcessor&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NoSuchMethodException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="kc">null</span> <span class="o">==</span> <span class="n">method</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 检查当前方法是否存在我定义的注解
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">MyAnnotation</span> <span class="n">myAnnotation</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">getAnnotation</span><span class="o">(</span><span class="n">MyAnnotation</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="kc">null</span> <span class="o">!=</span> <span class="n">myAnnotation</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">myAnnotation</span><span class="o">.</span><span class="na">say</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>起始我们上面的代码不仅使用了注解，还解析了注解。但是这种解析是方法自己完成的，能不能交给容器来完成我们自定义注解的处理呢。</p>
<h4 id="定义注解处理器">定义注解处理器</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">javax.annotation.processing.AbstractProcessor</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@SupportedAnnotationTypes</span><span class="o">(</span><span class="s">&#34;com.shali.ruby.bean.MyAnnotation&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyAnnotationProcessor</span> <span class="kd">extends</span> <span class="n">AbstractProcessor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(</span><span class="n">ProcessingEnvironment</span> <span class="n">processingEnv</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">super</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">processingEnv</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">process</span><span class="o">(</span><span class="n">Set</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">TypeElement</span><span class="o">&gt;</span> <span class="n">annotations</span><span class="o">,</span> <span class="n">RoundEnvironment</span> <span class="n">roundEnv</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="重写override方法">重写Override方法</h2>
<h3 id="重写equals必重写hashcode方法">重写equals()必重写hashCode()方法</h3>
<p>由于我们要保证相同的对象，其哈希值必定相同。</p>
<ul>
<li>定义一个中国公民类，只要他们身份证号相同，我们就认为他们是同一个人</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">People</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">id</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">People</span><span class="o">(</span><span class="n">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// 不重写 equals 方法，就没法做到，相同身份证 id，用 equals() 判断是同一个人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">o</span><span class="o">.</span><span class="na">getClass</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">People</span> <span class="n">people</span> <span class="o">=</span> <span class="o">(</span><span class="n">People</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">people</span><span class="o">.</span><span class="na">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">HappyCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDrivenLearn</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">People</span> <span class="n">people1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">People</span><span class="o">(</span><span class="s">&#34;123456&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">People</span> <span class="n">people2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">People</span><span class="o">(</span><span class="s">&#34;123456&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">people1</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">people2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">people1</span><span class="o">.</span><span class="na">hashCode</span><span class="o">()</span> <span class="o">!=</span> <span class="n">people2</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">people1</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 22805895
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">people2</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1413378318
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>通过我们重写<code>equals()</code>方法，仅比较 id ，我们做到了相同 id，就是相同的人。但是我们发现相同对象，但是其 hash 值却不相同。这有点违背<code>equals()</code>相同的对象，其哈希值必相同的原则。看来我们需要重写<code>hashCode()</code>方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">People</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">id</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">People</span><span class="o">(</span><span class="n">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 不重写 equals 方法，就没法做到，相同身份证 id，用 equals() 判断是同一个人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">o</span><span class="o">.</span><span class="na">getClass</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">People</span> <span class="n">people</span> <span class="o">=</span> <span class="o">(</span><span class="n">People</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">people</span><span class="o">.</span><span class="na">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 重写了 equals 方法，必重写 hashCode 方法，不然没法确保 equals 相同，hashCode 必相同的原则
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">HappyCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDrivenLearn</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">People</span> <span class="n">people1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">People</span><span class="o">(</span><span class="s">&#34;123456&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">People</span> <span class="n">people2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">People</span><span class="o">(</span><span class="s">&#34;123456&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">people1</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">people2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">people1</span><span class="o">.</span><span class="na">hashCode</span><span class="o">()</span> <span class="o">==</span> <span class="n">people2</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">people1</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1450575459
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">people2</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1450575459
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="泛型与通配符的区别">泛型与通配符?的区别</h2>
<ul>
<li>通配符 ? 表示编译期不能确定的类型，但运行时其类型是确定的</li>
<li>T，K，V，E，A，B，C 泛型代表编译时其类型就是确定的，因为编码使用的时候已经指的了类型</li>
</ul>
<h2 id="黑窗口">黑窗口</h2>
<p>黑窗口，命令行运行代码</p>
<p>编译 <code>javac -encoding utf8 Test.java</code></p>
<p>运行并开启断言 <code>java -ea Test</code>，如果不开启断言，断言失败了，是不会抛出异常的。</p>
<h2 id="线程">线程</h2>
<p>常用方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>wait()</td>
<td>释放对象锁<br />让出 CPU<br />需要 notify() 唤醒，才能使用 CPU</td>
</tr>
<tr>
<td>sleep()</td>
<td>不释放对象锁<br />让出 CPU<br />不需要任何唤醒，睡眠时间到，就可以去使用 CPU</td>
</tr>
<tr>
<td>notify()</td>
<td>执行完 notify() 方法，当前线程并不会释放锁，需要等 synchronized 代码执行完毕</td>
</tr>
</tbody>
</table>
<p>wait 让出 CPU，释放锁，暂停当前线程，后续需要唤醒，才能被 CPU 调度。</p>
<p>yield 类方法，让出 CPU，不释放锁，类似循环中的 continue，迎接下一轮的 CPU 调度。</p>
<p>sleep 类方法，让出 CPU，不释放锁，类似定时器，定时时间到了，才能被 CPU 调度。</p>
<p>interrupt 无实质作用的方法。</p>
<h3 id="线程空间">线程空间</h3>
<table>
<thead>
<tr>
<th>空间</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>主内存</td>
<td>线程之间的共享变量（实例变量和类变量，不包含局部变量）存储在主内存中。<br />局部变量是线程私有的，是不存在竞争问题。我们平常上锁都是给共享变量上锁。</td>
</tr>
<tr>
<td>线程私有的本地内存，也叫工作内存</td>
<td>本地内存中存储了该线程读/写共享变量的副本。<br />线程不能直接读写共享变量，必须借助工作内存。</td>
</tr>
</tbody>
</table>
<h3 id="线程内存模型">线程内存模型</h3>
<p>JMM（Java Memory Model）的抽象示意图：</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/v2-3d312429710bd6a11eca171858f67751_720w.jpg"
        data-srcset="/images/v2-3d312429710bd6a11eca171858f67751_720w.jpg, /images/v2-3d312429710bd6a11eca171858f67751_720w.jpg 1.5x, /images/v2-3d312429710bd6a11eca171858f67751_720w.jpg 2x"
        data-sizes="auto"
        alt="/images/v2-3d312429710bd6a11eca171858f67751_720w.jpg"
        title="img" /></p>
<h3 id="线程变量可见性">线程变量可见性</h3>
<table>
<thead>
<tr>
<th>方式</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>volatile</td>
<td>使用 volatile 修饰共享变量后，每个线程要操作变量时会从主内存中将变量拷贝到本地内存作为副本，当线程操作变量副本并写回主内存后，会通过 ==CPU 总线嗅探机制==告知其他线程该变量副本已经失效，需要重新从主内存中读取。</td>
</tr>
<tr>
<td>synchronized</td>
<td>当一个线程进入 synchronized 代码块后，线程获取到锁，会清空本地内存，然后从主内存中拷贝共享变量的最新值到本地内存作为副本，执行代码，又将修改后的副本值刷新到主内存中，最后线程释放锁。</td>
</tr>
</tbody>
</table>
<h2 id="池">池</h2>
<h3 id="字符串常量池">字符串常量池</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">&#34;hi&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="s">&#34;hi&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">s3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="s">&#34;hi&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">s4</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="s">&#34;hi&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">s3</span> <span class="o">!=</span> <span class="n">s2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">s3</span> <span class="o">!=</span> <span class="n">s4</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">s5</span> <span class="o">=</span> <span class="n">s3</span><span class="o">.</span><span class="na">intern</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">s6</span> <span class="o">=</span> <span class="n">s4</span><span class="o">.</span><span class="na">intern</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">s5</span> <span class="o">==</span> <span class="n">s6</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">s1</span> <span class="o">==</span> <span class="n">s5</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">s5</span> <span class="o">!=</span> <span class="n">s3</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="缓存池">缓存池</h3>
<ul>
<li>Integer.valueOf() 强制使用缓存池</li>
</ul>
<p>下面是此方法的实现源码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">static</span> <span class="n">Integer</span> <span class="nf">valueOf</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">IntegerCache</span><span class="o">.</span><span class="na">low</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">IntegerCache</span><span class="o">.</span><span class="na">high</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">IntegerCache</span><span class="o">.</span><span class="na">cache</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="o">(-</span><span class="n">IntegerCache</span><span class="o">.</span><span class="na">low</span><span class="o">)];</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在 Java 8 中，Integer 缓存池的大小默认为 -128 ~ 127。因为<code>IntegerCache.low</code>是<code>-128</code>，<code>IntegerCache.high</code>是<code>127</code>。</p>
<p>其实仔细看源码发现，最大值介于<code>java.lang.Integer.IntegerCache.high</code>~<code>Integer.MAX_VALUE - (-low) -1</code>之间，<code>java.lang.Integer.IntegerCache.high</code>是配置。</p>
<p>下面用代码来验证。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Integer</span> <span class="n">a1</span> <span class="o">=</span> <span class="mi">127</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Integer</span> <span class="n">a2</span> <span class="o">=</span> <span class="mi">127</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Integer</span> <span class="n">a3</span> <span class="o">=</span> <span class="mi">128</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Integer</span> <span class="n">a4</span> <span class="o">=</span> <span class="mi">128</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">a1</span> <span class="o">==</span> <span class="n">a2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">a3</span> <span class="o">!=</span> <span class="n">a4</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Integer</span> <span class="n">a5</span> <span class="o">=</span> <span class="o">-</span><span class="mi">128</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Integer</span> <span class="n">a6</span> <span class="o">=</span> <span class="o">-</span><span class="mi">128</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Integer</span> <span class="n">a7</span> <span class="o">=</span> <span class="o">-</span><span class="mi">129</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Integer</span> <span class="n">a8</span> <span class="o">=</span> <span class="o">-</span><span class="mi">129</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">a5</span> <span class="o">==</span> <span class="n">a6</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="n">a7</span> <span class="o">!=</span> <span class="n">a8</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>那么我们如何使我们定义的变量，用到缓存池呢？</p>
<p>答案是使用装箱方法，不是 new。看代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 定义一个缓存池常量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Integer</span> <span class="n">a1</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">123</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">Integer</span> <span class="n">a2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="mi">123</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">Integer</span> <span class="n">a3</span> <span class="o">=</span> <span class="mi">123</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// a1 在缓存池，a2 在堆中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">assert</span> <span class="n">a1</span> <span class="o">!=</span> <span class="n">a2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// a3 会发生自动装箱操作，即调用 Integer.valueOf 方法，就是利用缓冲池
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">assert</span> <span class="n">a3</span> <span class="o">==</span> <span class="n">a1</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="锁">锁</h2>
<p>互斥锁（mutex）只有加锁、解锁两种操作，且互斥锁的释放只能由加锁的那个线程来释放。</p>
<p>读写锁：</p>
<p>某线程对资源加读锁时，其他线程可以也可以加读锁，但是不能加写锁（意味着有人在读的时候，其他人也能读，不能写）。
某线程对资源加写锁时，其他线程什么锁都不能加（意味着有人在写的时候，其他人什么都不能干）。</p>
<p>读写锁有加读锁、加写锁、解锁三种操作。</p>
<p>排他锁：等于读写锁中的写锁，因为其他人什么都不能干，所以“排他”。
共享锁：等于读写锁中的读锁，因为其他人还可以读，所以“共享”。</p>
<p>自旋锁：线程在获取共享资源前先申请获取锁，如果申请不到，则一直继续申请（而不是阻塞），直到申请到为止。</p>
<p>循环自旋锁，递归自旋锁。</p>
<p>悲观锁：行锁，表锁。</p>
<p>乐观锁：</p>
<p>CAS 机制：Compare And Swap 比较并替换，即修改之前现检查。</p>
<h3 id="synchronized-1">synchronized</h3>
<h3 id="reentrantlock-1">ReentrantLock</h3>
<h3 id="总结">总结</h3>
<p>synchronized：加锁解锁过程由 JVM 自动控制</p>
<p>ReentrantLock：需要手动释放锁 unlock</p>
<blockquote>
<p>最后再贴一段 Doug Lea 大神在书中，关于在 synchronized 和 ReentrantLock 之间进行选择的原话，该如何选择，读者自己去思考吧。</p>
<p>在一些内置锁无法满足需求的情况下，ReentrantLock 可以作为一种高级工具。当需要一些高级功能时才应该使用 ReentrantLock，这些功能包括：可定时的，可轮询的与可中断的锁获取操作，公平队列，以及非块结构的锁。否则，还是应该优先使用synchronized。</p>
</blockquote>
<h2 id="新特性">新特性</h2>
<h3 id="18">1.8</h3>
<h4 id="optional">Optional</h4>
<p>Optional 类是 Java8 的新特性，是一个可以为 null 的容器对象。用来解决空指针异常（NPE：java.lang.NullPointerException）。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserInfo</span> <span class="n">userInfo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UserInfo</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">userInfo</span><span class="o">.</span><span class="na">setAddress</span><span class="o">(</span><span class="s">&#34;guangzhou&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">user</span><span class="o">.</span><span class="na">setUserInfo</span><span class="o">(</span><span class="n">userInfo</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">user</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 假如我们要获取 user 的地址信息，就要战战兢兢，防止 npe
</span></span></span><span class="line"><span class="cl"><span class="c1">// 报空指针异常
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUserInfo</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="c1">// if else 检查，不报空指针异常
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="o">(</span><span class="kc">null</span> <span class="o">!=</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">UserInfo</span> <span class="n">userInfo1</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="na">getUserInfo</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">(</span><span class="kc">null</span> <span class="o">!=</span> <span class="n">userInfo1</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">address</span> <span class="o">=</span> <span class="n">userInfo1</span><span class="o">.</span><span class="na">getAddress</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">address</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Optional 容器处理不报 npe
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">String</span> <span class="n">address</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="n">user</span><span class="o">).</span><span class="na">map</span><span class="o">(</span><span class="n">u</span> <span class="o">-&gt;</span> <span class="n">u</span><span class="o">.</span><span class="na">getUserInfo</span><span class="o">()).</span><span class="na">map</span><span class="o">(</span><span class="n">info</span> <span class="o">-&gt;</span> <span class="n">info</span><span class="o">.</span><span class="na">getAddress</span><span class="o">()).</span><span class="na">orElse</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>顺便提一下<code>PHP8.0</code>也增加了类似的语法糖。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 中途有一个实例是 null，则返回给 $address 的是 null
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$address</span> <span class="o">=</span> <span class="nx">user</span><span class="o">?-&gt;</span><span class="na">getUserInfo</span><span class="p">()</span><span class="o">?-&gt;</span><span class="na">getAddress</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>印象中<code>Swift</code>语言也有此类特性，暂不记得，后面想起再补充。</p>
<h4 id="接口支持定义抽象方法的默认实现">接口支持定义抽象方法的默认实现</h4>
<p>大咖秀</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">javax.servlet.http</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.EventListener</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">HttpSessionListener</span> <span class="kd">extends</span> <span class="n">EventListener</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">default</span> <span class="kt">void</span> <span class="nf">sessionCreated</span><span class="o">(</span><span class="n">HttpSessionEvent</span> <span class="n">se</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">default</span> <span class="kt">void</span> <span class="nf">sessionDestroyed</span><span class="o">(</span><span class="n">HttpSessionEvent</span> <span class="n">se</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="支持函数式编程lambda">支持函数式编程，Lambda</h4>
<blockquote>
<p>函数式编程最早是数学家阿隆佐·邱奇研究的一套函数变换逻辑，又称Lambda Calculus（λ-Calculus），所以也经常把函数式编程称为Lambda计算。</p>
</blockquote>
<h4 id="date-and-time-api">Date and Time API</h4>
<h4 id="pipelines-and-streams">Pipelines and Streams</h4>
<h4 id="type-annotations">Type Annotations</h4>
<h4 id="nashhorn-javascript-engine">Nashhorn JavaScript Engine</h4>
<h4 id="concurrent-accumulators">Concurrent Accumulators</h4>
<h2 id="解惑">解惑</h2>
<h3 id="字符串-1">字符串</h3>
<ul>
<li>为什么 StringBuffer 相对于 StringBuilder 线程安全？</li>
</ul>
<p>因为<code>java.lang.StringBuffer#append(java.lang.String)</code>方法使用了同步方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Override</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">StringBuffer</span> <span class="nf">append</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">toStringCache</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">super</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>为什么 String 是不可变的？</li>
</ul>
<p>因为 String 类的底层使用<code>char[]</code>来存储的字符串的字符元素，而且这个字符数组被<code>final</code>修饰，即常量数组。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">private</span> <span class="kd">final</span> <span class="kt">char</span> <span class="n">value</span><span class="o">[];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="哈希表">哈希表</h3>
<ul>
<li>为什么 Hashtable 相对于 HashMap 是线程安全的？</li>
</ul>
<p>因为<code>java.util.Hashtable#put</code>方法被<code>synchronized</code>修饰，即同步方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">V</span> <span class="nf">put</span><span class="o">(</span><span class="n">K</span> <span class="n">key</span><span class="o">,</span> <span class="n">V</span> <span class="n">value</span><span class="o">)</span> <span class="o">{}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="serializable-接口-1">Serializable 接口</h3>
<ul>
<li>为何实现 Serializable 接口时，要重写<code>serialVersionUID</code>属性？</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">String</span>
</span></span><span class="line"><span class="cl">    <span class="kd">implements</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span><span class="o">,</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;,</span> <span class="n">CharSequence</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="o">-</span><span class="mi">6849794470754667710L</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>serialVersionUID</code>其实是用在反序列化时，验证类文件版本的一致性。</p>
<h3 id="常量大小写问题">常量大小写问题</h3>
<ol>
<li>类常量，枚举常量，接口常量，全大写，下划线分割</li>
<li>对象常量，局部常量小驼峰</li>
<li>这样的命名约定可以使代码更易读、更易理解。当然，这只是一种通用的约定，具体的命名方式还可以根据团队或项目的规范进行调整。</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 类常量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">MAX_VALUE</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DEFAULT_NAME</span> <span class="o">=</span> <span class="s">&#34;John&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 枚举常量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">enum</span> <span class="n">DayOfWeek</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">MONDAY</span><span class="o">,</span> <span class="n">TUESDAY</span><span class="o">,</span> <span class="n">WEDNESDAY</span><span class="o">,</span> <span class="n">THURSDAY</span><span class="o">,</span> <span class="n">FRIDAY</span><span class="o">,</span> <span class="n">SATURDAY</span><span class="o">,</span> <span class="n">SUNDAY</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 接口常量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Constants</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">MAX_COUNT</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">String</span> <span class="n">DEFAULT_NAME</span> <span class="o">=</span> <span class="s">&#34;John&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 对象常量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">maxCount</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">defaultName</span> <span class="o">=</span> <span class="s">&#34;John&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="引用">引用</h2>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/138819184" target="_blank" rel="noopener noreffer ">volatile 关键字，你真的理解吗？</a></li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2022-08-24</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/posts/java%E5%9F%BA%E7%A1%80/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://xue.woyao.net/posts/java%E5%9F%BA%E7%A1%80/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" data-title="Java语言基础" data-hashtags="语言,java"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://xue.woyao.net/posts/java%E5%9F%BA%E7%A1%80/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" data-hashtag="语言"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://xue.woyao.net/posts/java%E5%9F%BA%E7%A1%80/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" data-title="Java语言基础"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://xue.woyao.net/posts/java%E5%9F%BA%E7%A1%80/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" data-title="Java语言基础"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://xue.woyao.net/posts/java%E5%9F%BA%E7%A1%80/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" data-title="Java语言基础" data-ralateuid="xxxx"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E8%AF%AD%E8%A8%80/">语言</a>,&nbsp;<a href="/tags/java/">Java</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/database/setnx/" class="prev" rel="prev" title="Redis的分布式锁"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Redis的分布式锁</a>
            <a href="/posts/framework/lombok/" class="next" rel="next" title="Lombok使用手册">Lombok使用手册<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.114.1">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">1998 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">沙里</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/valine@1.5.0/dist/Valine.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":50},"comment":{"valine":{"appId":"QGzwQXOqs5JOhN4RGPOkR2mR-MdYXbMMI","appKey":"WBmoGyJtbqUswvfLh6L8iEBr","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-CN","pageSize":10,"placeholder":"你的评论 ...","recordIP":true,"serverURLs":"https://leancloud.hugoloveit.com","visitor":true}},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.zh-cn","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
